---
phase: 10-commit-and-verify
plan: "02"
type: execute
wave: 1
depends_on: []
files_modified:
  - pnpm-workspace.yaml
  - .github/workflows/ci.yml
  - pnpm-lock.yaml
  - scripts/setup-dev.sh
  - CONTRIBUTING.md
  - README.md
  - .planning/ROADMAP.md
  - .planning/STATE.md
  - .planning/09-01-PLAN.md
  - .planning/09-01-SUMMARY.md
  - .planning/09-02-PLAN.md
  - .planning/09-02-SUMMARY.md
  - .planning/09-CONTEXT.md
autonomous: true
gap_closure: true
requirements:
  - CI-02
  - QUAL-01
  - QUAL-02
  - QUAL-04

must_haves:
  truths:
    - "pnpm-workspace.yaml declaring apps/* and packages/* is in the committed tree"
    - "Updated ci.yml with single pnpm install (no cd apps/web workaround) is in the committed tree"
    - "scripts/setup-dev.sh automating pre-commit install is in the committed tree"
    - "CONTRIBUTING.md or README.md referencing setup-dev.sh onboarding command is in the committed tree"
    - "git ls-files confirms every Phase 9 artifact is tracked"
  artifacts:
    - path: "pnpm-workspace.yaml"
      provides: "Workspace topology declaration"
      contains: "apps/*"
    - path: ".github/workflows/ci.yml"
      provides: "CI pipeline with single pnpm install"
    - path: "scripts/setup-dev.sh"
      provides: "Developer onboarding automation"
    - path: "CONTRIBUTING.md"
      provides: "Onboarding command documentation"
  key_links:
    - from: "committed HEAD"
      to: "pnpm-workspace.yaml"
      via: "git ls-files"
      pattern: "git ls-files pnpm-workspace.yaml"
    - from: "committed HEAD"
      to: ".github/workflows/ci.yml"
      via: "git ls-files"
      pattern: "pnpm install --frozen-lockfile"
    - from: "committed HEAD"
      to: "scripts/setup-dev.sh"
      via: "git ls-files"
      pattern: "git ls-files scripts/setup-dev.sh"
---

<objective>
Stage and commit all Phase 9 artifacts that exist on disk but are absent from the committed tree (HEAD).

Purpose: Phase 9 execution created pnpm-workspace.yaml, updated ci.yml (removes the cd apps/web workaround), setup-dev.sh, updated CONTRIBUTING.md and README.md — but none were committed. This plan stages and commits all of them, satisfying CI-02, QUAL-01, QUAL-02, and QUAL-04 in the committed tree.

Output: A single git commit containing all Phase 9 artifacts. After this commit, a fresh `git clone` can run `pnpm install && pnpm --filter @viflo/web test` without error, and `scripts/setup-dev.sh` automates pre-commit hook installation.
</objective>

<execution_context>
@/home/ollie/.claude/get-shit-done/workflows/execute-plan.md
@/home/ollie/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/v1.1-MILESTONE-AUDIT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify Phase 9 disk artifacts exist and are correct before staging</name>
  <files>none (read-only verification)</files>
  <action>
    Run the following checks to confirm all Phase 9 disk artifacts are present and correct before staging. If any check fails, stop and report — do NOT proceed to the commit task.

    Check 1 — pnpm-workspace.yaml exists and declares workspace topology:
    ```bash
    cat pnpm-workspace.yaml
    ```
    Expect: `packages:` block with `- 'apps/*'` and `- 'packages/*'`.

    Check 2 — ci.yml no longer has the cd apps/web workaround:
    ```bash
    grep -n "cd apps/web" .github/workflows/ci.yml
    ```
    Expect: no output (workaround removed). If it still shows, Phase 9 fix wasn't applied — stop and report.

    Check 3 — setup-dev.sh exists and is executable:
    ```bash
    ls -la scripts/setup-dev.sh && head -5 scripts/setup-dev.sh
    ```
    Expect: file is executable (x bit set) and starts with `#!/bin/bash` or `#!/usr/bin/env bash`.

    Check 4 — CONTRIBUTING.md references setup-dev.sh:
    ```bash
    grep -n "setup-dev" CONTRIBUTING.md
    ```
    Expect: at least one line referencing `setup-dev.sh` or `./scripts/setup-dev.sh`.

    Check 5 — Phase 9 planning docs exist:
    ```bash
    ls .planning/09-*.md
    ```
    Expect: 09-CONTEXT.md, 09-01-PLAN.md, 09-01-SUMMARY.md, 09-02-PLAN.md, 09-02-SUMMARY.md.

    If all checks pass, proceed to Task 2.

  </action>
  <verify>
    <automated>grep -c "apps/\*" /home/ollie/Development/Tools/viflo/pnpm-workspace.yaml && grep -c "setup-dev" /home/ollie/Development/Tools/viflo/CONTRIBUTING.md && ls /home/ollie/Development/Tools/viflo/scripts/setup-dev.sh</automated>
    <manual>Confirm pnpm-workspace.yaml has apps/* entry, CONTRIBUTING.md references setup-dev, and setup-dev.sh exists</manual>
  </verify>
  <done>All Phase 9 disk artifacts confirmed present and correct. pnpm-workspace.yaml declares apps/*. ci.yml has no cd apps/web workaround. setup-dev.sh exists and is executable. CONTRIBUTING.md references setup-dev.sh.</done>
</task>

<task type="auto">
  <name>Task 2: Stage and commit all Phase 9 artifacts</name>
  <files>
    pnpm-workspace.yaml
    .github/workflows/ci.yml
    pnpm-lock.yaml
    scripts/setup-dev.sh
    CONTRIBUTING.md
    README.md
    .planning/ROADMAP.md
    .planning/STATE.md
    .planning/09-01-PLAN.md
    .planning/09-01-SUMMARY.md
    .planning/09-02-PLAN.md
    .planning/09-02-SUMMARY.md
    .planning/09-CONTEXT.md
  </files>
  <action>
    Stage all Phase 9 artifacts using the exact commands from the v1.1 audit report:

    ```bash
    cd /home/ollie/Development/Tools/viflo

    # Phase 9 workspace and CI artifacts
    git add pnpm-workspace.yaml
    git add .github/workflows/ci.yml
    git add pnpm-lock.yaml
    git add scripts/setup-dev.sh
    git add CONTRIBUTING.md README.md
    git add .planning/ROADMAP.md .planning/STATE.md

    # Phase 9 planning docs
    git add .planning/09-01-PLAN.md .planning/09-02-PLAN.md
    git add .planning/09-01-SUMMARY.md .planning/09-02-SUMMARY.md
    git add .planning/09-CONTEXT.md
    ```

    Verify the staged set looks correct before committing:
    ```bash
    git diff --cached --stat
    ```
    Expect: pnpm-workspace.yaml (new), ci.yml (modified — workaround removed), pnpm-lock.yaml (modified), setup-dev.sh (new), CONTRIBUTING.md (modified), README.md (modified), ROADMAP.md (modified), STATE.md (modified), and 5 planning docs.

    Then commit:
    ```bash
    git commit -m "$(cat <<'EOF'

feat(phase-9): commit workspace config and developer onboarding automation

Phase 9 execution created all these artifacts on disk but never committed them.
This commit brings the committed tree into sync with the disk state.

- pnpm-workspace.yaml declares apps/_ and packages/_ workspace topology (CI-02, QUAL-04)
- .github/workflows/ci.yml: removes cd apps/web workaround, single pnpm install (CI-02)
- scripts/setup-dev.sh automates pre-commit hook installation (QUAL-01, QUAL-02)
- CONTRIBUTING.md and README.md reference onboarding command
- Phase 9 planning docs (09-PLAN.md, 09-SUMMARY.md, 09-CONTEXT.md files)

Co-Authored-By: Claude Sonnet 4.6 <noreply@anthropic.com>
EOF
)"

````

    Do NOT use `git add .` or `git add -A` — only stage the specific files listed above.

    IMPORTANT: If pnpm-lock.yaml is very large (6000+ lines changed per audit), this is expected — the workspace-aware lock file replaces the pre-workspace version. The file should stage and commit cleanly.

  </action>
  <verify>
    <automated>git -C /home/ollie/Development/Tools/viflo log --oneline -1 && git -C /home/ollie/Development/Tools/viflo ls-files pnpm-workspace.yaml scripts/setup-dev.sh .github/workflows/ci.yml</automated>
    <manual>Confirm git log shows the new Phase 9 commit and git ls-files returns all three key paths</manual>
  </verify>
  <done>
    Commit exists in HEAD containing all Phase 9 artifacts.
    `git ls-files pnpm-workspace.yaml` returns the file.
    `git ls-files scripts/setup-dev.sh` returns the file.
    `git show HEAD:.github/workflows/ci.yml` does NOT contain `cd apps/web`.
    `git show HEAD:CONTRIBUTING.md` contains reference to `setup-dev.sh`.
  </done>
</task>

</tasks>

<verification>
After Task 2 completes:

```bash
# Confirm CI-02: pnpm-workspace.yaml committed and correct
git show HEAD:pnpm-workspace.yaml
# Should contain: apps/* and packages/* entries

# Confirm CI-02 + QUAL-04: ci.yml has no workaround
git show HEAD:.github/workflows/ci.yml | grep -c "cd apps/web"
# Should output: 0

# Confirm QUAL-01 + QUAL-02: setup-dev.sh committed
git ls-files scripts/setup-dev.sh
# Should output: scripts/setup-dev.sh

# Confirm onboarding doc reference
git show HEAD:CONTRIBUTING.md | grep setup-dev
# Should show reference to setup-dev.sh
````

</verification>

<success_criteria>

- pnpm-workspace.yaml is in committed HEAD declaring apps/_ and packages/_ (CI-02)
- ci.yml in committed HEAD has no `cd apps/web` workaround (CI-02, QUAL-04)
- scripts/setup-dev.sh is in committed HEAD automating pre-commit install (QUAL-01, QUAL-02)
- CONTRIBUTING.md in committed HEAD references the onboarding command
- Zero untracked Phase 9 artifacts remain
  </success_criteria>

<output>
After completion, create `.planning/10-commit-and-verify/10-02-SUMMARY.md` documenting:
- What was staged and committed
- The commit SHA
- Which requirements are now satisfied in the committed tree
</output>
