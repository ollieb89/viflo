# Plan 09-02: Developer Onboarding Automation

<plan phase="9" plan="2">
  <overview>
    <phase_name>Workspace & Developer Tooling — Developer Onboarding</phase_name>
    <goal>Automate pre-commit hook installation and document onboarding process</goal>
  </overview>
  
  <dependencies>
    <complete>Plan 09-01: Workspace configuration complete</complete>
  </dependencies>
  
  <reference>
    <context>09-CONTEXT.md</context>
    <requirement>QUAL-01, QUAL-02 gap closure</requirement>
  </reference>

  <tasks>
    <task type="auto" priority="1">
      <name>Create setup-dev.sh script</name>
      <files>scripts/setup-dev.sh</files>
      <action>
        Create comprehensive developer setup script that:
        1. Checks for required tools (node, pnpm, python3, pre-commit)
        2. Runs `pnpm install` to install dependencies
        3. Runs `pre-commit install` to set up git hooks
        4. Verifies setup by running basic checks
        5. Provides clear success/failure messages
        
        Script should be idempotent (safe to run multiple times).
      </action>
      <verify>Script exists, is executable, handles all setup steps</verify>
    </task>

    <task type="auto" priority="1">
      <name>Add tool version checks to setup script</name>
      <files>scripts/setup-dev.sh</files>
      <action>
        Add version checking for:
        - Node.js (check .nvmrc for expected version)
        - pnpm (>=10.0.0)
        - Python 3 (for pre-commit)
        - pre-commit (>=3.0.0)
        
        Provide helpful error messages if tools missing or wrong version.
      </action>
      <verify>Script validates all tool versions before proceeding</verify>
    </task>

    <task type="auto" priority="1">
      <name>Update CONTRIBUTING.md with onboarding steps</name>
      <files>CONTRIBUTING.md</files>
      <action>
        Add clear "Getting Started" or "Development Setup" section:
        1. Prerequisites (Node 20, pnpm, Python 3)
        2. Quick start: `./scripts/setup-dev.sh`
        3. Manual steps (if not using script)
        4. Verification steps to confirm setup worked
      </action>
      <verify>CONTRIBUTING.md references setup-dev.sh script</verify>
    </task>

    <task type="auto" priority="2">
      <name>Update README.md with setup reference</name>
      <files>README.md</files>
      <action>
        Add brief development setup section or link to CONTRIBUTING.md.
        Ensure new contributors can find setup instructions easily.
      </action>
      <verify>README.md has clear path to development setup</verify>
    </task>

    <task type="auto" priority="2">
      <name>Create setup verification command</name>
      <files>scripts/setup-dev.sh, package.json</files>
      <action>
        Add `pnpm run verify-setup` or similar that checks:
        - Node modules exist
        - Pre-commit hooks installed
        - Basic commands work (lint, type-check)
        
        Integrate into setup script to verify success.
      </action>
      <verify>Setup can be verified after completion</verify>
    </task>

    <task type="manual" priority="2">
      <name>Test fresh clone workflow</name>
      <action>
        Test complete fresh clone process:
        1. Clone repo to temp directory
        2. Run `./scripts/setup-dev.sh`
        3. Verify pre-commit hooks active (check .git/hooks/)
        4. Run `pnpm test` to verify everything works
        5. Make test commit to verify hooks trigger
      </action>
      <verify>Fresh clone → setup → dev ready works end-to-end</verify>
      <done>Developer onboarding workflow verified</done>
    </task>
  </tasks>
</plan>
