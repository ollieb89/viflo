---
milestone: v1.1
name: Dogfooding
audited: 2026-02-24
status: gaps_found
scores:
  requirements: 4/11
  phases: 4/5
  integration: 9/11
  flows: 3/5
gaps:
  requirements:
    - id: "CI-02"
      status: "partial"
      phase: "Phase 5 → Phase 9 gap closure"
      claimed_by_plans: ["05-01-PLAN.md", "09-01-PLAN.md"]
      completed_by_plans: ["09-01-SUMMARY.md"]
      verification_status: "partial — Phase 9 VERIFICATION.md missing; pnpm-workspace.yaml and ci.yml changes untracked"
      evidence: "Committed ci.yml has separate 'cd apps/web && pnpm install' workaround. pnpm-workspace.yaml exists on disk but untracked. pnpm --filter @viflo/web test fails on fresh clone without committed workspace file."
    - id: "QUAL-01"
      status: "partial"
      phase: "Phase 5 → Phase 9 gap closure"
      claimed_by_plans: ["05-02-PLAN.md", "09-02-PLAN.md"]
      completed_by_plans: ["09-02-SUMMARY.md"]
      verification_status: "partial — Phase 9 VERIFICATION.md missing; setup-dev.sh untracked"
      evidence: ".pre-commit-config.yaml committed and valid. .git/hooks/pre-commit ABSENT — hooks not installed in current checkout. scripts/setup-dev.sh exists on disk but untracked."
    - id: "QUAL-02"
      status: "partial"
      phase: "Phase 5 → Phase 9 gap closure"
      claimed_by_plans: ["05-02-PLAN.md", "09-02-PLAN.md"]
      completed_by_plans: ["09-02-SUMMARY.md"]
      verification_status: "partial — depends on QUAL-01; hook not installed"
      evidence: "Pre-commit hook not installed. A secret committed right now would NOT be blocked by the hook. Config exists, automation does not (uncommitted)."
    - id: "QUAL-04"
      status: "partial"
      phase: "Phase 6 → Phase 9 gap closure"
      claimed_by_plans: ["06-02-PLAN.md", "09-01-PLAN.md"]
      completed_by_plans: ["09-01-SUMMARY.md"]
      verification_status: "partial — Phase 9 VERIFICATION.md missing; pnpm-workspace.yaml untracked"
      evidence: "CI 'Run tests' step calls 'pnpm run test' → 'pnpm --filter @viflo/web test'. Without committed pnpm-workspace.yaml, this filter fails on fresh clone. CI test step is broken in committed tree."
    - id: "CONTENT-01"
      status: "partial"
      phase: "Phase 7 → Phase 8"
      claimed_by_plans: ["07-01-PLAN.md", "08-01-PLAN.md"]
      completed_by_plans: ["07-01-SUMMARY.md", "08-01-SUMMARY.md"]
      verification_status: "partial — microservices-patterns committed at 500 lines; 11 other SKILL.md reductions unstaged"
      evidence: "11 of 12 SKILL.md files are 534–1055 lines in committed HEAD. Working tree has them at 143–498 lines with references/ extracted, but all modifications and reference files are unstaged/untracked."
    - id: "CONTENT-02"
      status: "partial"
      phase: "Phase 7 → Phase 8"
      claimed_by_plans: ["07-02-PLAN.md", "08-02-PLAN.md"]
      completed_by_plans: ["07-02-SUMMARY.md", "08-02-SUMMARY.md"]
      verification_status: "partial — Phase 5/6/7 VERIFICATIONs committed; Phase 0–3 VERIFICATIONs untracked"
      evidence: ".planning/verifications/phase-{0,1,2,3}-VERIFICATION.md all exist on disk but are untracked. Requirement specifies 'Phases 0, 1, 2, and 3' — none are committed."
    - id: "CONTENT-03"
      status: "unsatisfied"
      phase: "Phase 7"
      claimed_by_plans: ["07-03-PLAN.md"]
      completed_by_plans: ["07-03-SUMMARY.md"]
      verification_status: "unsatisfied in committed tree — all telemetry artifacts untracked"
      evidence: ".telemetry/usage.csv, .telemetry/README.md, scripts/log-telemetry.sh, scripts/telemetry-report.sh all untracked. 07-VERIFICATION.md checked '[x] Telemetry files committed to repo (not in .gitignore)' — this check was incorrect."
  integration:
    - "pnpm-workspace.yaml absent from committed tree — CI filter '@viflo/web' fails on fresh clone. Affects CI-02, QUAL-04."
    - "Pre-commit hooks not installed — .git/hooks/pre-commit absent. Affects QUAL-01, QUAL-02."
    - "Phase 9 implementation complete on disk but entirely uncommitted. Affects CI-02, QUAL-01, QUAL-02, QUAL-04."
  phases:
    - "Phase 9 (09-workspace-tooling): No VERIFICATION.md — phase not committed"
tech_debt:
  - phase: "07-content-hygiene"
    items:
      - "Phase 7 implementation exists on disk but uncommitted: 11 SKILL.md modularizations, 30 reference files, .planning/verifications/phase-{0-3}-VERIFICATION.md, .telemetry/ directory, scripts/log-telemetry.sh, scripts/telemetry-report.sh"
      - "07-VERIFICATION.md incorrectly checked '[x] Telemetry files committed to repo' — this was not verified against git, only against disk"
  - phase: "09-workspace-tooling"
    items:
      - "Phase 9 implementation exists on disk but uncommitted: pnpm-workspace.yaml, updated ci.yml, updated pnpm-lock.yaml, scripts/setup-dev.sh, updated CONTRIBUTING.md, updated README.md"
      - "09-01-SUMMARY.md and 09-02-SUMMARY.md exist as untracked planning files"
      - "No VERIFICATION.md created for Phase 9"
---

# Milestone v1.1 Dogfooding — Audit Report (Updated)

**Audited:** 2026-02-24
**Previous audit:** 2026-02-23 (gaps_found — all gaps addressed in Phases 8–9 but work uncommitted)
**Status:** gaps_found
**Milestone Goal:** Apply viflo's own methodology, CI templates, testing patterns, and security scanning to the viflo repository itself — proving the toolkit with its own toolkit.

---

## Audit Context

This audit supersedes the 2026-02-23 audit. Phases 8 and 9 were executed to close the gaps identified in that audit. However, **a significant portion of Phase 7 and all of Phase 9's implementation exists on disk but has not been committed to git**. The REQUIREMENTS.md checkboxes were updated to reflect the intended final state, not the committed state.

### Key Finding: Uncommitted Work Cohort

The following artifacts exist on the working tree but are absent from the committed tree (HEAD):

**Phase 7 artifacts (unstaged/untracked):**
- 11 SKILL.md modularizations (533–1055 lines → 143–498 lines)
- 30 reference files under `.agent/skills/*/references/`
- `.planning/verifications/phase-{0,1,2,3}-VERIFICATION.md` (4 files)
- `.telemetry/usage.csv`, `.telemetry/README.md`
- `scripts/log-telemetry.sh`, `scripts/telemetry-report.sh`

**Phase 9 artifacts (untracked/unstaged):**
- `pnpm-workspace.yaml`
- Updated `.github/workflows/ci.yml` (removes workaround, single install)
- Updated `pnpm-lock.yaml` (workspace-aware, 6039-line reduction)
- `scripts/setup-dev.sh`
- Updated `CONTRIBUTING.md` and `README.md`
- `09-01-PLAN.md`, `09-01-SUMMARY.md`, `09-02-PLAN.md`, `09-02-SUMMARY.md`

**A single commit staging all of the above would bring the milestone to passing.**

---

## Requirements Coverage (3-Source Cross-Reference)

| Requirement | Description | Phase | VERIFICATION.md | SUMMARY Claim | REQUIREMENTS.md | Integration (committed) | Final Status |
|-------------|-------------|-------|-----------------|--------------|-----------------|------------------------|--------------|
| CI-01 | GitHub Actions workflow on push/PR | 5 | ✅ passed | claimed | `[x]` | WIRED | **satisfied** |
| CI-02 | Pipeline: install→lint→type-check→test→build | 5→9 | ⚠️ Phase 5 passed; Phase 9 missing | claimed | `[x]` | PARTIAL | **partial** |
| CI-03 | CI blocks merge on failure | 5 | ✅ passed | claimed | `[x]` | WIRED | **satisfied** |
| QUAL-01 | Pre-commit hooks: gitleaks + detect-secrets | 5→9 | ⚠️ Phase 5 passed; Phase 9 missing | claimed | `[x]` | PARTIAL | **partial** |
| QUAL-02 | Secret commit blocked by pre-commit | 5→9 | ⚠️ Phase 5 passed; Phase 9 missing | claimed | `[x]` | PARTIAL | **partial** |
| QUAL-03 | apps/web/ Vitest suite ≥1 test/function | 6 | ✅ passed | claimed | `[x]` | WIRED | **satisfied** |
| QUAL-04 | Vitest runs in CI, fails pipeline on failure | 6→9 | ⚠️ Phase 6 passed; Phase 9 missing | claimed | `[x]` | PARTIAL | **partial** |
| QUAL-05 | Coverage ratchet prevents regression | 6 | ✅ passed | claimed | `[x]` | WIRED | **satisfied** |
| CONTENT-01 | All SKILL.md ≤500 lines → references/ | 7→8 | ⚠️ Phase 8 passed (microservices only) | claimed | `[x]` | PARTIAL | **partial** |
| CONTENT-02 | VERIFICATION.md for Phases 0–3 | 7→8 | ✅ Phase 8 passed (phases 5-7); Phase 0-3 untracked | claimed | `[x]` | PARTIAL | **partial** |
| CONTENT-03 | Telemetry script logs LLM calls to CSV | 7 | ⚠️ claimed in 07-VERIFICATION but files untracked | claimed | `[x]` | UNWIRED | **unsatisfied** |

**Score:** 4/11 requirements fully satisfied in committed tree (CI-01, CI-03, QUAL-03, QUAL-05)
**Score (disk state):** 11/11 requirements satisfied on disk — all work is done, just uncommitted

**Orphaned requirements:** None — all 11 REQ-IDs appear in phase VERIFICATION.md files.

---

## Phase Verification Status

| Phase | Directory | VERIFICATION.md | Status |
|-------|-----------|-----------------|--------|
| Phase 5: CI & Security | `05-ci-and-security/` | ✅ committed (112 lines) | Complete |
| Phase 6: Test Suite | `06-test-suite/` | ✅ committed (132 lines) | Complete |
| Phase 7: Content Hygiene | `08-verification-closure/07-VERIFICATION.md` | ✅ committed (135 lines) | Complete (in Phase 8 dir) |
| Phase 8: Verification Closure | `08-verification-closure/` | ✅ committed, passed 5/5 | Complete |
| Phase 9: Workspace Tooling | `09-workspace-tooling/` | ❌ MISSING | **Unverified** |

**Note:** Phase 7 has no dedicated phase directory — its VERIFICATION.md was created by Phase 8 and resides in `08-verification-closure/`. The CONTEXT.md exists at `09-workspace-tooling/09-CONTEXT.md` (committed today) but no PLAN.md or VERIFICATION.md.

---

## Integration Check Results (Committed Tree)

**Flows complete in committed tree:** 3/5
**Flows broken in committed tree:** 2/5
**Flows complete on disk:** 5/5

### Complete Flows (Committed Tree)

| Flow | Requirements | Verdict |
|------|-------------|---------|
| CI pipeline triggers + branch protection | CI-01, CI-03 | Working — workflow triggers on push/PR, branch protection requires `build` status check |
| Vitest test suite local execution | QUAL-03 | Working — 13 tests pass, `apps/web/pnpm-lock.yaml` committed, `cd apps/web && pnpm install` workaround present |
| Coverage ratchet enforcement | QUAL-05 | Working — `cd apps/web && pnpm run test:coverage:ratchet` step bypasses workspace filter issue |

### Broken Flows (Committed Tree)

| Flow | Requirements | Break Point |
|------|-------------|------------|
| Fresh clone CI pipeline (full sequence) | CI-02, QUAL-04 | `pnpm run test` → `pnpm --filter @viflo/web test` fails — `pnpm-workspace.yaml` not committed; pnpm has no workspace topology, filter resolves to nothing |
| Pre-commit secret blocking | QUAL-01, QUAL-02 | `.git/hooks/pre-commit` absent — hooks not installed; secret would not be scanned; `setup-dev.sh` automation untracked |

---

## Root Cause Analysis

All gaps trace to a single root cause: **Phase 7 execution created artifacts but did not commit them.** This left the repository in a hybrid state where:

1. Phase 8 ran VERIFICATION.md checks against the **disk state** (files existed on disk) — not the committed state
2. Phase 8 checked off REQUIREMENTS.md checkboxes based on disk state
3. The v1.1 milestone audit would appear complete if only checking disk presence
4. A fresh clone of HEAD would fail tests (no workspace), not block secrets (no hooks), and be missing telemetry infrastructure

The fix is one commit: stage all Phase 7 and Phase 9 artifacts.

---

## Uncommitted Cohort — Files to Stage

```bash
# Phase 7 artifacts
git add .agent/skills/*/SKILL.md
git add .agent/skills/*/references/
git add .agent/skills/INDEX.md
git add .planning/verifications/
git add .telemetry/
git add scripts/log-telemetry.sh scripts/telemetry-report.sh

# Phase 9 artifacts
git add pnpm-workspace.yaml
git add .github/workflows/ci.yml
git add pnpm-lock.yaml
git add scripts/setup-dev.sh
git add CONTRIBUTING.md README.md
git add .planning/ROADMAP.md .planning/STATE.md

# Planning docs
git add .planning/07-01-PLAN.md .planning/07-02-PLAN.md .planning/07-03-PLAN.md
git add .planning/07-01-SUMMARY.md .planning/07-02-SUMMARY.md .planning/07-03-SUMMARY.md
git add .planning/07-CONTEXT.md
git add .planning/09-01-PLAN.md .planning/09-02-PLAN.md
git add .planning/09-01-SUMMARY.md .planning/09-02-SUMMARY.md
git add .planning/09-CONTEXT.md
```

After committing, Phase 9 still needs:
1. A VERIFICATION.md verifying the Phase 9 success criteria
2. `make setup` Makefile target (per 09-CONTEXT.md decisions — setup-dev.sh was used instead, so this may already satisfy the spirit)

---

## Functional Gaps Summary

### Blocker: Phase 9 uncommitted (5 requirements at risk)

**Committed tree fails on fresh clone:**
- `pnpm --filter @viflo/web test` → workspace filter fails (CI-02, QUAL-04)
- Pre-commit hooks not installed → secrets not blocked (QUAL-01, QUAL-02)

**Fix:** Commit Phase 9 artifacts (pnpm-workspace.yaml, ci.yml, setup-dev.sh + CONTRIBUTING.md)

### Blocker: Phase 7 uncommitted (3 requirements at risk)

**Committed tree:**
- 11 SKILL.md files at 534–1055 lines (CONTENT-01)
- Phase 0–3 VERIFICATION.md files absent (CONTENT-02)
- Telemetry scripts absent (CONTENT-03)

**Fix:** Stage Phase 7 working-tree changes

---

## Tech Debt (Non-blocking)

### Phase 9: Makefile vs setup-dev.sh
- 09-CONTEXT.md decisions specified a `Makefile` with `make setup` target
- Phase 9 execution used `scripts/setup-dev.sh` instead (different mechanism, same function)
- The CONTEXT decision was not honored — minor but worth noting for consistency

### Phase 7: VERIFICATION.md disk-vs-committed discrepancy
- 07-VERIFICATION.md checked `[x] Telemetry files committed to repo` without verifying against `git ls-files`
- Future VERIFICATION.md checklists should use `git ls-files` to confirm items are committed, not just present on disk

---

*Generated by /gsd:audit-milestone — 2026-02-24*
*Supersedes: 2026-02-23 audit*
